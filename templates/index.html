<!-- <!DOCTYPE html>
<html>
<head>
    <title>CI/CD Pipeline Demo</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="card">
        <h1>ðŸ”¥ My Jenkins CI/CD Is Now LIVE</h1>
        <p>This UI is deployed using:</p>
        <ul>
            <li>GitHub</li>
            <li>Jenkins</li>
            <li>Docker</li>
            <li>Python Flask</li>
        </ul>

        <h3>Status:</h3>
        <p class="status">âœ… Deployed Successfully</p>

        <p class="note">
            Change this text, push to Git â†’ Jenkins will redeploy automatically.
        </p>
    </div>
</body>
</html> -->

<!--     new      -->
<!-- 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CI/CD Pipeline Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
    <script defer src="/static/app.js"></script>
</head>
<body>

<div class="navbar">
    <div class="logo">ðŸš€ CI/CD LAB</div>
    <div class="nav-right">
        <span id="buildVersion">Build: {{ build_version }}</span>
        <button onclick="refreshStatus()">ðŸ”„ Refresh</button>
    </div>
</div>

<div class="container">
    <div class="card">
        <h1>Jenkins CI/CD Pipeline</h1>
        <p class="subtitle">Live Deployment Monitor</p>
        <p class="note">Build version: {{ build_version }}</p>

        
        <div class="status-box" id="statusBox">
            <div class="dot" id="statusDot"></div>
            <span id="statusText">Checking status...</span>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <h3>Source</h3>
                <p>GitHub</p>
            </div>
            <div class="info-item">
                <h3>CI Server</h3>
                <p>Jenkins</p>
            </div>
            <div class="info-item">
                <h3>Container</h3>
                <p>Docker</p>
            </div>
            <div class="info-item">
                <h3>Build Version</h3>
                <p id="versionText">{{ build_version }}</p>
            </div>
        </div>

        <div class="log-box">
            <h3>Deployment Test</h3>
            <p>Edit this UI â†’ Commit â†’ Push â†’ Jenkins Deploys â†’ Refresh page</p>
            <textarea id="logArea" readonly>Waiting for health check...</textarea>
        </div>

        <div class="footer">
            <p>Automated CI/CD Deployment Demo</p>
        </div>
    </div>
</div>

</body>
</html> -->

<!--  with db    -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Task Tracker (DB)</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="wrap">
    <h1>Task Tracker</h1>
    <p>Simple tasks stored in MySQL â€” demo for CI/CD hello  bhai.</p>

    <div class="controls">
      <input id="title" placeholder="New task title" />
      <button id="add">Add Task</button>
      <button id="refresh">Refresh</button>
    </div>

    <table id="tasks">
      <thead>
        <tr><th>ID</th><th>Title</th><th>Status</th></tr>
      </thead>
      <tbody>
        {% for t in tasks %}
        <tr>
          <td>{{ t.id }}</td>
          <td>{{ t.title }}</td>
          <td>{{ t.status }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

<script>
async function loadTasks() {
  const res = await fetch("/tasks");
  const data = await res.json();
  const tbody = document.querySelector("#tasks tbody");
  tbody.innerHTML = "";
  data.forEach(t => {
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${t.id}</td><td>${t.title}</td><td>${t.status}</td>`;
    tbody.appendChild(tr);
  });
}

document.getElementById("add").onclick = async () => {
  const title = document.getElementById("title").value.trim();
  if (!title) {
    alert("Enter a title");
    return;
  }
  await fetch("/tasks", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({title})
  });
  document.getElementById("title").value = "";
  loadTasks();
};

document.getElementById("refresh").onclick = loadTasks;

window.onload = loadTasks;
</script>
</body>
</html>

